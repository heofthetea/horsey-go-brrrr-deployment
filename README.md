# horsey-go-brrrr

This is where a central deployment resides to run the horsey-go-brrrr project.<br>
The horsey-go-brrrr project is a connect-4 game developed in the scope of the lecture "Web-Engineering II" at dhbw. It comprises of:

- [https://github.com/heofthetea/horsey-go-brrrr-be](https://github.com/heofthetea/horsey-go-brrrr-be) - a quarkus REST api
- [https://github.com/heofthetea/horsey-go-brrrr-fe](https://github.com/heofthetea/horsey-go-brrrr-fe) - a Vue.js application serving as an indepentend client

## About

Initially, horsey-go-brrrr was intended to be a chess multiplayer game. This would have been perfectly in scope with a development team of 2, as was initially the case. However due to the unfortunate circumstance of our beloved Josia dropping out, the development team was effectively halved and a full chess application with large amount of functionality became out of scope.<br>
&nbsp;&nbsp;&nbsp;&nbsp;
In order to reduce scope, the game implemented has been reduced from chess to connect-4, with reasoning being that the _technical_ scope (i.e. protocols etc.) remains the same, but the overhead generated by move validation is reduced. Also, "end-user functionality" (i.e. Stuff a user can do in the application) is significantly reduced (one example being the (missing) feature to view a game's move history - While this is a nice UX feature, it is not essential to the app's functionality).<br>

## How to run

This project provides two docker compose files:

1. `docker-compose-azure.yml`: This is the compose file actually used on the azure deployment under [https://horsey.francecentral.cloudapp.azure.com](https://horsey.francecentral.cloudapp.azure.com)
2. `docker-compose.yml`: This is the file that should be used for local testing

### Local docker compose

Take notice of the `network_mode: host` on the api container. This is necessary in order to validate keycloak JWT tokens correctly - having containers communicate through service discovery would lead to issuer mismatches when validating the token.<br>
All docker containers should be publicly available on online docker registries. As a result, all you need to do is run the docker compose file:

```bash
docker compose up -d
```

The following should be provided:

- A keycloak accessible under `localhost:8081`
  - the keycloak will have a fully configured realm, with the following two testing users:
    - username: `test1`, password: `test`
    - username: `test2`, password: `test`
- The Vue.js app accessible under `localhost:15173`

> **Info**: It is theoretically possible to play a game with oneself (i.e. using the same user as guest and host), however some of the apps functionality is better represented by playing with two different users.

## Repository tour

In addition to the two docker compose files, this particular repository contains further configuration files:

- `keycloak/`: This directory holds JSON files which are loaded into the Keycloak IDP to configure the default clients and users.
- `nginx.conf`: This is the nginx config used on the "production" azure system
- `postgres/`: This directory contains a script to create multiple database on DBMS startup
